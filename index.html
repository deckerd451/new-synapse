<script>
  // Enable only when developing locally
  if (location.hostname === "localhost" || location.hostname === "127.0.0.1") {
    window.addEventListener("error", (event) => {
      try {
        navigator.sendBeacon("/api/client-errors", JSON.stringify({
          message: event.message,
          source: event.filename,
          lineno: event.lineno,
          colno: event.colno,
          stack: event.error?.stack || null,
          timestamp: new Date().toISOString()
        }));
      } catch (err) {
        console.warn("Local error reporter skipped:", err);
      }
    }, true);
  }
</script>
